!function(a,b){"function"==typeof define&&define.amd?define("packery/js/rect",b):"object"==typeof module&&module.exports?module.exports=b():(a.Packery=a.Packery||{},a.Packery.Rect=b())}(window,function(){function b(a){for(var c in b.defaults)this[c]=b.defaults[c];for(c in a)this[c]=a[c]}b.defaults={x:0,y:0,width:0,height:0};var c=b.prototype;return c.contains=function(a){var b=a.width||0,c=a.height||0;return this.x<=a.x&&this.y<=a.y&&this.x+this.width>=a.x+b&&this.y+this.height>=a.y+c},c.overlaps=function(a){var b=this.x+this.width,c=this.y+this.height,d=a.x+a.width,e=a.y+a.height;return this.x<d&&b>a.x&&this.y<e&&c>a.y},c.getMaximalFreeRects=function(a){if(!this.overlaps(a))return!1;var d,c=[],e=this.x+this.width,f=this.y+this.height,g=a.x+a.width,h=a.y+a.height;return this.y<a.y&&(d=new b({x:this.x,y:this.y,width:this.width,height:a.y-this.y}),c.push(d)),e>g&&(d=new b({x:g,y:this.y,width:e-g,height:this.height}),c.push(d)),f>h&&(d=new b({x:this.x,y:h,width:this.width,height:f-h}),c.push(d)),this.x<a.x&&(d=new b({x:this.x,y:this.y,width:a.x-this.x,height:this.height}),c.push(d)),c},c.canFit=function(a){return this.width>=a.width&&this.height>=a.height},b}),function(a,b){if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],b);else if("object"==typeof module&&module.exports)module.exports=b(require("./rect"));else{var c=a.Packery=a.Packery||{};c.Packer=b(c.Rect)}}(window,function(b){function c(a,b,c){this.width=a||0,this.height=b||0,this.sortDirection=c||"downwardLeftToRight",this.reset()}var d=c.prototype;d.reset=function(){this.spaces=[];var a=new b({x:0,y:0,width:this.width,height:this.height});this.spaces.push(a),this.sorter=e[this.sortDirection]||e.downwardLeftToRight},d.pack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b];if(c.canFit(a)){this.placeInSpace(a,c);break}}},d.columnPack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b],d=c.x<=a.x&&c.x+c.width>=a.x+a.width&&c.height>=a.height-.01;if(d){a.y=c.y,this.placed(a);break}}},d.rowPack=function(a){for(var b=0;b<this.spaces.length;b++){var c=this.spaces[b],d=c.y<=a.y&&c.y+c.height>=a.y+a.height&&c.width>=a.width-.01;if(d){a.x=c.x,this.placed(a);break}}},d.placeInSpace=function(a,b){a.x=b.x,a.y=b.y,this.placed(a)},d.placed=function(a){for(var b=[],c=0;c<this.spaces.length;c++){var d=this.spaces[c],e=d.getMaximalFreeRects(a);e?b.push.apply(b,e):b.push(d)}this.spaces=b,this.mergeSortSpaces()},d.mergeSortSpaces=function(){c.mergeRects(this.spaces),this.spaces.sort(this.sorter)},d.addSpace=function(a){this.spaces.push(a),this.mergeSortSpaces()},c.mergeRects=function(a){var b=0,c=a[b];a:for(;c;){for(var d=0,e=a[b+d];e;){if(e==c)d++;else{if(e.contains(c)){a.splice(b,1),c=a[b];continue a}c.contains(e)?a.splice(b+d,1):d++}e=a[b+d]}b++,c=a[b]}return a};var e={downwardLeftToRight:function(a,b){return a.y-b.y||a.x-b.x},rightwardTopToBottom:function(a,b){return a.x-b.x||a.y-b.y}};return c}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/item",["outlayer/outlayer","./rect"],b):"object"==typeof module&&module.exports?module.exports=b(require("outlayer"),require("./rect")):a.Packery.Item=b(a.Outlayer,a.Packery.Rect)}(window,function(b,c){var d=document.documentElement.style,e="string"==typeof d.transform?"transform":"WebkitTransform",f=function(){b.Item.apply(this,arguments)},g=f.prototype=Object.create(b.Item.prototype),h=g._create;g._create=function(){h.call(this),this.rect=new c};var i=g.moveTo;return g.moveTo=function(a,b){var c=Math.abs(this.position.x-a),d=Math.abs(this.position.y-b),e=this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&c<1&&d<1;return e?void this.goTo(a,b):void i.apply(this,arguments)},g.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&e&&(this.element.style[e]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},g.disablePlacing=function(){this.isPlacing=!1},g.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},g.showDropPlaceholder=function(){var a=this.dropPlaceholder;a||(a=this.dropPlaceholder=document.createElement("div"),a.className="packery-drop-placeholder",a.style.position="absolute"),a.style.width=this.size.width+"px",a.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(a)},g.positionDropPlaceholder=function(){this.dropPlaceholder.style[e]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},g.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)},f}),function(a,b){"function"==typeof define&&define.amd?define("packery/js/packery",["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],b):"object"==typeof module&&module.exports?module.exports=b(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):a.Packery=b(a.getSize,a.Outlayer,a.Packery.Rect,a.Packery.Packer,a.Packery.Item)}(window,function(b,c,d,e,f){function i(a,b){return a.position.y-b.position.y||a.position.x-b.position.x}function j(a,b){return a.position.x-b.position.x||a.position.y-b.position.y}function k(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}d.prototype.canFit=function(a){return this.width>=a.width-1&&this.height>=a.height-1};var g=c.create("packery");g.Item=f;var h=g.prototype;h._create=function(){c.prototype._create.call(this),this.packer=new e,this.shiftPacker=new e,this.isEnabled=!0,this.dragItemCount=0;var a=this;this.handleDraggabilly={dragStart:function(){a.itemDragStart(this.element)},dragMove:function(){a.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){a.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(c,d){d&&a.itemDragStart(c.currentTarget)},drag:function(c,d){d&&a.itemDragMove(c.currentTarget,d.position.left,d.position.top)},stop:function(c,d){d&&a.itemDragEnd(c.currentTarget)}}},h._resetLayout=function(){this.getSize(),this._getMeasurements();var a,b,c;this._getOption("horizontal")?(a=1/0,b=this.size.innerHeight+this.gutter,c="rightwardTopToBottom"):(a=this.size.innerWidth+this.gutter,b=1/0,c="downwardLeftToRight"),this.packer.width=this.shiftPacker.width=a,this.packer.height=this.shiftPacker.height=b,this.packer.sortDirection=this.shiftPacker.sortDirection=c,this.packer.reset(),this.maxY=0,this.maxX=0},h._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},h._getItemLayoutPosition=function(a){if(this._setRectSize(a.element,a.rect),this.isShifting||this.dragItemCount>0){var b=this._getPackMethod();this.packer[b](a.rect)}else this.packer.pack(a.rect);return this._setMaxXY(a.rect),a.rect},h.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},h._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},h._setMaxXY=function(a){this.maxX=Math.max(a.x+a.width,this.maxX),this.maxY=Math.max(a.y+a.height,this.maxY)},h._setRectSize=function(a,c){var d=b(a),e=d.outerWidth,f=d.outerHeight;(e||f)&&(e=this._applyGridGutter(e,this.columnWidth),f=this._applyGridGutter(f,this.rowHeight)),c.width=Math.min(e,this.packer.width),c.height=Math.min(f,this.packer.height)},h._applyGridGutter=function(a,b){if(!b)return a+this.gutter;b+=this.gutter;var c=a%b,d=c&&c<1?"round":"ceil";return a=Math[d](a/b)*b},h._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},h._manageStamp=function(a){var c,b=this.getItem(a);if(b&&b.isPlacing)c=b.rect;else{var e=this._getElementOffset(a);c=new d({x:this._getOption("originLeft")?e.left:e.right,y:this._getOption("originTop")?e.top:e.bottom})}this._setRectSize(a,c),this.packer.placed(c),this._setMaxXY(c)},h.sortItemsByPosition=function(){var a=this._getOption("horizontal")?j:i;this.items.sort(a)},h.fit=function(a,b,c){var d=this.getItem(a);d&&(this.stamp(d.element),d.enablePlacing(),this.updateShiftTargets(d),b=void 0===b?d.rect.x:b,c=void 0===c?d.rect.y:c,this.shift(d,b,c),this._bindFitEvents(d),d.moveTo(d.rect.x,d.rect.y),this.shiftLayout(),this.unstamp(d.element),this.sortItemsByPosition(),d.disablePlacing())},h._bindFitEvents=function(a){function d(){c++,2==c&&b.dispatchEvent("fitComplete",null,[a])}var b=this,c=0;a.once("layout",d),this.once("layoutComplete",d)},h.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},h.needsResizeLayout=function(){var a=b(this.element),c=this._getOption("horizontal")?"innerHeight":"innerWidth";return a[c]!=this.size[c]},h.resizeShiftPercentLayout=function(){var a=this._getItemsForLayout(this.items),c=this._getOption("horizontal"),d=c?"y":"x",e=c?"height":"width",f=c?"rowHeight":"columnWidth",g=c?"innerHeight":"innerWidth",h=this[f];if(h=h&&h+this.gutter){this._getMeasurements();var i=this[f]+this.gutter;a.forEach(function(a){var b=Math.round(a.rect[d]/h);a.rect[d]=b*i})}else{var j=b(this.element)[g]+this.gutter,k=this.packer[e];a.forEach(function(a){a.rect[d]=a.rect[d]/k*j})}this.shiftLayout()},h.itemDragStart=function(a){if(this.isEnabled){this.stamp(a);var b=this.getItem(a);b&&(b.enablePlacing(),b.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(b))}},h.updateShiftTargets=function(a){this.shiftPacker.reset(),this._getBoundingRect();var b=this._getOption("originLeft"),c=this._getOption("originTop");this.stamps.forEach(function(a){var e=this.getItem(a);if(!e||!e.isPlacing){var f=this._getElementOffset(a),g=new d({x:b?f.left:f.right,y:c?f.top:f.bottom});this._setRectSize(a,g),this.shiftPacker.placed(g)}},this);var e=this._getOption("horizontal"),f=e?"rowHeight":"columnWidth",g=e?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var h,i=this[f];if(i=i&&i+this.gutter){var j=Math.ceil(a.rect[g]/i),k=Math.floor((this.shiftPacker[g]+this.gutter)/i);h=(k-j)*i;for(var l=0;l<k;l++)this._addShiftTarget(l*i,0,h)}else h=this.shiftPacker[g]+this.gutter-a.rect[g],this._addShiftTarget(0,0,h);var m=this._getItemsForLayout(this.items),n=this._getPackMethod();m.forEach(function(a){var b=a.rect;this._setRectSize(a.element,b),this.shiftPacker[n](b),this._addShiftTarget(b.x,b.y,h);var c=e?b.x+b.width:b.x,d=e?b.y:b.y+b.height;if(this._addShiftTarget(c,d,h),i)for(var f=Math.round(b[g]/i),j=1;j<f;j++){var k=e?c:b.x+i*j,l=e?b.y+i*j:d;this._addShiftTarget(k,l,h)}},this)},h._addShiftTarget=function(a,b,c){var d=this._getOption("horizontal")?b:a;if(!(0!==d&&d>c)){var e=a+","+b,f=this.shiftTargetKeys.indexOf(e)!=-1;f||(this.shiftTargetKeys.push(e),this.shiftTargets.push({x:a,y:b}))}},h.shift=function(a,b,c){var d,e=1/0,f={x:b,y:c};this.shiftTargets.forEach(function(a){var b=k(a,f);b<e&&(d=a,e=b)}),a.rect.x=d.x,a.rect.y=d.y};var l=120;h.itemDragMove=function(a,b,c){function f(){e.shift(d,b,c),d.positionDropPlaceholder(),e.layout()}var d=this.isEnabled&&this.getItem(a);if(d){b-=this.size.paddingLeft,c-=this.size.paddingTop;var e=this,g=new Date;this._itemDragTime&&g-this._itemDragTime<l?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(f,l)):(f(),this._itemDragTime=g)}},h.itemDragEnd=function(a){function e(){c++,2==c&&(b.element.classList.remove("is-positioning-post-drag"),b.hideDropPlaceholder(),d.dispatchEvent("dragItemPositioned",null,[b]))}var b=this.isEnabled&&this.getItem(a);if(b){clearTimeout(this.dragTimeout),b.element.classList.add("is-positioning-post-drag");var c=0,d=this;b.once("layout",e),this.once("layoutComplete",e),b.moveTo(b.rect.x,b.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),b.disablePlacing(),this.unstamp(b.element)}},h.bindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"on")},h.unbindDraggabillyEvents=function(a){this._bindDraggabillyEvents(a,"off")},h._bindDraggabillyEvents=function(a,b){var c=this.handleDraggabilly;a[b]("dragStart",c.dragStart),a[b]("dragMove",c.dragMove),a[b]("dragEnd",c.dragEnd)},h.bindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"on")},h.unbindUIDraggableEvents=function(a){this._bindUIDraggableEvents(a,"off")},h._bindUIDraggableEvents=function(a,b){var c=this.handleUIDraggable;a[b]("dragstart",c.start)[b]("drag",c.drag)[b]("dragstop",c.stop)};var m=h.destroy;return h.destroy=function(){m.apply(this,arguments),this.isEnabled=!1},g.Rect=d,g.Packer=e,g}),function(a,b){"function"==typeof define&&define.amd?define(["isotope/js/layout-mode","packery/js/packery"],b):"object"==typeof module&&module.exports?module.exports=b(require("isotope-layout/js/layout-mode"),require("packery")):b(a.Isotope.LayoutMode,a.Packery)}(window,function(b,c){var d=b.create("packery"),e=d.prototype,f={_getElementOffset:!0,_getMeasurement:!0};for(var g in c.prototype)f[g]||(e[g]=c.prototype[g]);var h=e._resetLayout;e._resetLayout=function(){this.packer=this.packer||new c.Packer,this.shiftPacker=this.shiftPacker||new c.Packer,h.apply(this,arguments)};var i=e._getItemLayoutPosition;e._getItemLayoutPosition=function(a){return a.rect=a.rect||new c.Rect,i.call(this,a)};var j=e.needsResizeLayout;e.needsResizeLayout=function(){return this._getOption("horizontal")?this.needsVerticalResizeLayout():j.call(this)};var k=e._getOption;return e._getOption=function(a){return"horizontal"==a?void 0!==this.options.isHorizontal?this.options.isHorizontal:this.options.horizontal:k.apply(this.isotope,arguments)},d});